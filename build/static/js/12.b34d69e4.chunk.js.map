{"version":3,"sources":["components/downloadBtn/index.js","pages/aftertreatment/correction/style.js","pages/aftertreatment/correction/index.js"],"names":["FileDown","props","handleDownFile","event","api_url","fileName","preventDefault","stopPropagation","setState","loadingStatus","buttonDisabled","instance","axios","create","baseURL","responseType","timeout","headers","url","get","then","res","console","log","backEndFileName","split","replace","length","loadTxtFile","data","catch","error","state","content","aLink","document","createElement","blob","Blob","type","download","href","URL","createObjectURL","body","appendChild","evt","createEvent","initEvent","dispatchEvent","removeChild","revokeObjectURL","this","text","style","className","btnType","btnDisabled","placement","title","onClick","disabled","loading","size","icon","PureComponent","proTypes","PropTypes","isRequired","defaultProps","ContentWapper","styled","main","ContentBox","div","InfoItem","InfoLabel","label","InfoContent","InlineInfoItem","FixBox","FixInputBox","FixOutputBox","FixBtn","TabPane","Tabs","Correction","handleUpdateWfstCorrections","rules","name","deleteFlag","post","params","delete","reload","message","success","handleUpdateRulesCorrections","handleUpdateRulesCorrectionsByRegrex","componentDidMount","key","selectedProject","projects","rulesFixResult","handleRulesFix","handleChangeRulesProject","rulesCorrections","tab","width","value","onChange","map","item","Option","position","right","TextArea","rows","placeholder","layout","onFinish","Item","required","shouldUpdate","htmlType","allowClear","ref","input","needFixText","selectedWfstProject","wfstProjects","wfstCorrections","wfstFixResult","handleWfstFix","handleChangeWfstProject","defaultActiveKey","callback","authorities","includes","renderRulesCorrection","renderWfstCorrection","rulesInit","wfstInit","Component","connect","getIn","dispatch","actionCreators","handleRulesInit","project","changeRulesCorrections","corrections","handleWfstInit"],"mappings":"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","file":"static/js/12.b34d69e4.chunk.js","sourcesContent":["/**\n * @desc:这是一个文件下载组件\n * @param:参数说明\n *    api_url:接口地址\n *    icon: 下载图片设置\n *    text: 下载文本设置\n *    downFileBtnClass: 按钮样式设置\n * \n */\nimport React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport {Button, Tooltip} from 'antd';\nimport {\n    DownloadOutlined\n} from '@ant-design/icons';\nimport axios from 'axios'\n\nclass FileDown extends PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loadingStatus: true,\n            buttonDisabled: false\n        }\n    }\n\n    loadTxtFile(fileName, content,url){\n        console.log(content)\n        let aLink = document.createElement('a');\n        let blob = new Blob([content], {\n            type: 'application/octet-stream'\n        });\n        aLink.download = fileName;\n        aLink.href = URL.createObjectURL(blob)\n        // aLink.href = url\n        // aLink.click();\n        //此写法兼容可火狐浏览器\n        document.body.appendChild(aLink);\n        var evt = document.createEvent(\"MouseEvents\");\n        evt.initEvent(\"click\", false, false);\n        aLink.dispatchEvent(evt);\n        document.body.removeChild(aLink)\n\n        URL.revokeObjectURL(blob);\n        \n\n    }\n\n    //文件下载操作\n    handleDownFile = (event, api_url,fileName) => {\n        event.preventDefault();\n        event.stopPropagation();\n        //开启loading 按钮置灰\n        this.setState({\n            loadingStatus: false,\n            buttonDisabled: true,\n        });\n\n        let instance = axios.create({\n            baseURL:'http://10.186.0.210:8001/',\n            responseType:'blob',\n            timeout:10000,\n            headers:{\"Content-Type\":\"multipart/form-data\"}\n        })\n        let url = api_url\n\n        instance.get(url).then(res=>{\n            console.log(res)\n            let backEndFileName = \"\"\n            if(res.headers){\n                // let regex1 = /\"(.+?)\"/g;   // \"\" \n                backEndFileName = res.headers['content-disposition'].split('filename=')[1].replace(/\"/g,\"\")\n                console.log(backEndFileName)\n            }\n            if(backEndFileName.length>0){\n                fileName = backEndFileName\n            }\n            this.loadTxtFile(fileName,res.data,url)\n            this.setState({\n                loadingStatus: true,\n                buttonDisabled: false,\n            });\n        }).catch((error) => {\n            //关闭loading 按钮恢复正常\n            this.setState({\n                loadingStatus: false,\n                buttonDisabled: false,\n            });\n            console.log('文件下载失败', error);\n        })\n    };\n\n  render() {\n    const {api_url, text, style, className, btnType, fileName,btnDisabled} = this.props;\n    const {loadingStatus, buttonDisabled} = this.state;\n    // btnType 用于展现不同的下载样式 分为iconBtn wordBtn \n    if(btnType==='iconBtn'){\n        return(\n            <Tooltip placement=\"bottomLeft\" title={text}>\n                <Button \n                    type=\"primary\" \n                    style={style}\n                    className={className}\n                    onClick={(event) => this.handleDownFile(event, api_url,fileName)}\n                    disabled={buttonDisabled||btnDisabled}\n                    loading={!loadingStatus}\n                    size=\"small\" \n                    icon={<DownloadOutlined />}\n                />\n            </Tooltip>\n        )\n    }\n    return (\n      <Button\n        type=\"primary\"\n        style={style}\n        // icon={<DownloadOutlined />}\n        className={className}\n        onClick={(event) => this.handleDownFile(event, api_url, fileName)}\n        disabled={buttonDisabled||btnDisabled}\n        loading={!loadingStatus}\n      >\n        {loadingStatus ? text : '下载中...'}\n      </Button>\n    );\n  }\n}\n\n//定义属性 类型以及是否必填项\nFileDown.proTypes = {\n  api_url: PropTypes.isRequired\n};\n//定义属性的默认值\nFileDown.defaultProps = {\n  text: '文件下载',\n  icon: 'download',\n  className: {},\n  btnDisabled:false\n};\nexport default FileDown;","import styled from 'styled-components';\n\nexport const ContentWapper = styled.main`\n    margin:30px 10px 0;\n`\nexport const ContentBox = styled.div`\n    min-width: 900px;   \n    background:#fff;\n    padding: 20px 35px;\n    min-height: calc(100vh - 156px);\n`\n\nexport const InfoItem = styled.div`\n    margin-bottom: 10px;\n    position:relative;\n    // display:flex;\n    // align-items: flex-start;\n    // padding: 0 40px 0 0;\n`\nexport const InfoLabel = styled.label`\n    width:65px;\n    display:inline-block;\n    text-align:right;\n    margin-right:15px;\n`\nexport const InfoContent = styled.div`\n    //position:relative;\n    display:inline-block;\n    vertical-align: top;\n    width: calc(100% - 80px);\n`\nexport const InlineInfoItem = styled.div`\n    margin-bottom: 10px;\n    // padding: 0 40px 0 0;\n    & *{\n        display:inline-block;\n        vertical-align: text-top;\n    }\n    & .ant-input{\n        width:200px;\n    }\n    & .ant-btn{\n        margin-left:30px;\n    }\n\n    & .add-btn{\n        background: #52c41a;\n        border-color: #52c41a;\n        color: #fff;\n    }\n    & .add-btn:focus,.add-btn:hover{\n        background: #74d445;\n        border-color: #74d445;\n    }\n    & .ant-form-item-with-help{\n        margin-bottom:0;\n    }\n    & .ant-form-item-explain{\n        margin-left:10px;\n    }\n`\nexport const InlineInfoLabel = styled.label`\n    width:120px;\n    text-align:right;\n    margin-right:15px;\n    display:inline-block;\n`\n\nexport const ChangeBtn = styled.div`\n    position: absolute;\n    right: 0;\n    z-index: 100;\n`\n\nexport const FixBox = styled.div`\n    margin:20px 0;\n`\n\nexport const FixInputBox = styled.div`\n    float: left;\n    width: 50%;\n`\n\nexport const FixOutputBox = styled.div`\n    display: inline-block;\n    width: 50%;\n`\n\nexport const FixBtn = styled.div`\n    text-align: center;\n    margin: 20px;\n`\n\n","import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport { Tabs, Input, Select, Button, Form, message } from 'antd';\nimport {actionCreators} from './store'\nimport { post } from '../../../utils/ajax'\nimport { ContentWapper,ContentBox,InfoItem,InfoLabel,InfoContent,FixBox,FixInputBox,FixOutputBox,FixBtn,InlineInfoItem } from './style'\n\nimport DownloadBtn from '../../../components/downloadBtn'\n\nconst { TabPane } = Tabs;\n\nclass Correction extends Component{\n    callback(key) {\n        console.log(key);\n    }\n\n    handleUpdateWfstCorrections=(rules,name,type=\"add\")=>{\n        let deleteFlag = 0\n        if(type==='delete'){\n            deleteFlag = 1\n        }\n        let url = \"api/v1/post-process/wfst/\"+name+\"/\"\n        if(rules){\n            post({\n                url,\n                params:{\n                    name,\n                    rules:[rules],\n                    delete:deleteFlag\n                }\n            }).then(res=>{\n                console.log(res)\n                this.reload()\n                message.success(\"易混淆词表更新成功！\")\n            }).catch()\n        }\n    }\n\n    handleUpdateRulesCorrections=(rules,name,type=\"add\")=>{\n        let deleteFlag = 0\n        if(type==='delete'){\n            deleteFlag = 1\n        }\n        let url = \"api/v1/post-process/rules/\"+name+\"/\"\n        if(rules){\n            post({\n                url,\n                params:{\n                    name,\n                    rules:[rules],\n                    delete:deleteFlag\n                }\n            }).then(res=>{\n                console.log(res)\n                this.reload()\n                message.success(\"规则纠错词表更新成功！\")\n            }).catch()\n        }\n    }\n\n    handleUpdateRulesCorrectionsByRegrex=(rules,name,type=\"add\")=>{\n        let deleteFlag = 0\n        if(type==='delete'){\n            deleteFlag = 1\n        }\n        let url = \"api/v1/post-process/regrex/\"+name+\"/\"\n        if(rules){\n            post({\n                url,\n                params:{\n                    name,\n                    rules:[rules],\n                    delete:deleteFlag\n                }\n            }).then(res=>{\n                console.log(res)\n\n                this.reload()\n                // this.props.changeRulesCorrections(res.data.rules)\n                // this.reload()\n                // this.props.handleChangeRulesProject(name)\n                message.success(\"规则纠错词表更新成功！\")\n            }).catch()\n        }\n    }\n\n    renderRulesCorrection(){\n\n        const { selectedProject, projects,rulesFixResult,handleRulesFix,handleChangeRulesProject,rulesCorrections } = this.props;\n        return(\n            <TabPane tab=\"规则纠错\" key=\"1\">\n                <InfoItem>\n                    <InfoLabel>\n                        环境名称\n                    </InfoLabel>\n                    <InfoContent>\n                        <Select style={{ width: 200 }} value={selectedProject} onChange={handleChangeRulesProject}>\n                            {projects.map(item=>(\n                                <Select.Option key={item} value={item}>{item}</Select.Option>\n                            ))}\n                        </Select>\n                    </InfoContent>\n                    <DownloadBtn\n                        style={{ position:'absolute', right:'0' }}\n                        api_url={\"api/v1/post-process/download/?type=rule&name=\"+selectedProject}\n                        text=\"下载配置文件\"\n                        fileName={selectedProject+'_rules_config.txt'}\n                    />           \n                </InfoItem>\n                <InfoItem>\n                    <InfoLabel>纠错词对</InfoLabel>\n                    <InfoContent>\n                        {/* <ChangeBtn>\n                            <Button type=\"primary\">修改</Button>\n                        </ChangeBtn> */}\n                        <Input.TextArea value={rulesCorrections} disabled style={{ width: '100%' }} rows={4} placeholder=\"\" />\n                    </InfoContent>\n                </InfoItem>\n\n                <InlineInfoItem>\n                    <Form name=\"rulesForm\" layout=\"inline\" onFinish={(value)=>this.handleUpdateRulesCorrectionsByRegrex(value,selectedProject,\"add\")}>\n                        <Form.Item\n                            name=\"pre\"\n                            label=\"被修正词\"\n                            rules={[{ required: true, message: '请输入被修正词!' }]}\n                        >\n                            <Input/>\n                        </Form.Item>\n                        <Form.Item\n                            name=\"after\"\n                            label=\"修正词\"\n                            rules={[{ required: true, message: '请输入修正词!' }]}\n                        >\n                            <Input/>\n                        </Form.Item>\n                        <Form.Item shouldUpdate={true}>\n                            {() => (\n                            <Button\n                                type=\"primary\"\n                                htmlType=\"submit\"\n                                className={\"add-btn\"}\n                            >\n                                添加\n                            </Button>\n                            )}\n                        </Form.Item>\n                    </Form>\n                </InlineInfoItem>\n                <InlineInfoItem>\n                    <Form name=\"rulesForm\" layout=\"inline\" onFinish={(value)=>this.handleUpdateRulesCorrectionsByRegrex(value,selectedProject,\"delete\")}>\n                        <Form.Item\n                            name=\"pre\"\n                            label=\"被修正词\"\n                            rules={[{ required: true, message: '请输入被修正词!' }]}\n                        >\n                            <Input/>\n                        </Form.Item>\n                        <Form.Item\n                            name=\"after\"\n                            label=\"修正词\"\n                            rules={[{ required: true, message: '请输入修正词!' }]}\n                        >\n                            <Input/>\n                        </Form.Item>\n                        <Form.Item shouldUpdate={true}>\n                            {() => (\n                                <Button \n                                    type=\"danger\" \n                                    htmlType=\"submit\"\n                                >\n                                    删除\n                                </Button>\n                            )}\n                        </Form.Item>\n                    </Form>\n                </InlineInfoItem>\n\n                <FixBox>\n                    <FixInputBox>\n                        <Input.TextArea allowClear ref={(input)=>{this.needFixText = input}} style={{ width: '100%' }} rows={6} placeholder=\"在此输入需要修复的语句\" />\n                    </FixInputBox>\n                    <FixOutputBox>\n                        <Input.TextArea disabled  value={rulesFixResult} style={{ width: '100%' }} rows={6} placeholder=\"修复结果\" />\n                    </FixOutputBox>\n                    <FixBtn>\n                        <Button type=\"primary\" onClick={()=>handleRulesFix(selectedProject,this.needFixText.state.value)}>修复语句</Button>\n                    </FixBtn>\n                </FixBox>\n            </TabPane>\n        )\n    }\n\n    renderWfstCorrection(){\n\n        const { selectedWfstProject, wfstProjects,wfstCorrections,wfstFixResult,handleWfstFix,handleChangeWfstProject } = this.props;\n        return(\n            <TabPane tab=\"智能纠错\" key=\"2\">\n                <InfoItem>\n                    <InfoLabel>\n                        环境名称\n                    </InfoLabel>\n                    <InfoContent>\n                        <Select style={{ width: 200 }} value={selectedWfstProject} onChange={handleChangeWfstProject}>\n                            {wfstProjects.map(item=>(\n                                <Select.Option key={item} value={item}>{item}</Select.Option>\n                            ))}\n                        </Select>\n                    </InfoContent>\n                    <DownloadBtn\n                        style={{ position:'absolute', right:'0' }}\n                        api_url={\"api/v1/post-process/download/?type=wfst&name=\"+selectedWfstProject}\n                        text=\"下载配置文件\"\n                            fileName={selectedWfstProject+'_wfst_config.txt'}\n                    />\n                </InfoItem>\n                <InfoItem>\n                    <InfoLabel>易混淆词</InfoLabel>\n                    <InfoContent>\n                        {/* <ChangeBtn>\n                            <Button  >修改</Button>\n                        </ChangeBtn> */}\n                        <Input.TextArea value={ wfstCorrections } disabled style={{ width: '100%' }} rows={4} placeholder=\"\" />\n                    </InfoContent>\n                </InfoItem>\n\n                <InlineInfoItem>\n                    <Form name=\"wfstForm\" layout=\"inline\" onFinish={(value)=>this.handleUpdateWfstCorrections(value,selectedWfstProject,\"add\")}>\n                    <Form.Item\n                            name=\"word\"\n                            label=\"易混淆词\"\n                            rules={[{ required: true, message: '请输入易混淆词!' }]}\n                        >\n                            <Input/>\n                        </Form.Item>\n                        <Form.Item shouldUpdate={true}>\n                            {() => (\n                            <Button\n                                type=\"primary\"\n                                htmlType=\"submit\"\n                                className={\"add-btn\"}\n                            >\n                                添加\n                            </Button>\n                            )}\n                        </Form.Item>\n                    </Form>\n                </InlineInfoItem>\n\n                <InlineInfoItem>\n                    <Form name=\"wfstForm\" layout=\"inline\" onFinish={(value)=>this.handleUpdateWfstCorrections(value,selectedWfstProject,\"delete\")}>\n                        <Form.Item\n                            name=\"word\"\n                            label=\"易混淆词\"\n                            rules={[{ required: true, message: '请输入易混淆词!' }]}\n                        >\n                            <Input/>\n                        </Form.Item>\n                        <Form.Item shouldUpdate={true}>\n                            {() => (\n                                <Button \n                                    type=\"danger\" \n                                    htmlType=\"submit\"\n                                >\n                                    删除\n                                </Button>\n                            )}\n                        </Form.Item>\n                    </Form>\n                </InlineInfoItem>\n                {/* <InlineInfoItem>\n                    <InlineInfoLabel>添加易混淆词</InlineInfoLabel>\n                    <Input/>\n                    <Button className={\"add-btn\"}>添加</Button>\n                </InlineInfoItem>\n\n                <InlineInfoItem>\n                    <InlineInfoLabel>删除易混淆词</InlineInfoLabel>\n                    <Input/>\n                    <Popconfirm title=\"确认删除？\" onConfirm={confirm} onCancel={cancel} okText=\"确定\" cancelText=\"取消\">\n                        <Button type=\"danger\">删除</Button>\n                    </Popconfirm>\n                </InlineInfoItem> */}\n\n                <FixBox>\n                    <FixInputBox>\n                        <Input.TextArea allowClear ref={(input)=>{this.needFixText = input}} style={{ width: '100%' }} rows={6} placeholder=\"在此输入需要修复的语句\" />\n                    </FixInputBox>\n                    <FixOutputBox>\n                        <Input.TextArea disabled  value={wfstFixResult} style={{ width: '100%' }} rows={6} placeholder=\"修复结果\" />\n                    </FixOutputBox>\n                    <FixBtn>\n                        <Button type=\"primary\" onClick={()=>handleWfstFix(selectedWfstProject,this.needFixText.state.value)}>修复语句</Button>\n                    </FixBtn>\n\n                </FixBox>\n            </TabPane>\n        )\n    }\n\n    render(){\n        return(\n            <ContentWapper>\n                <ContentBox>\n                    <Tabs defaultActiveKey=\"1\" onChange={this.callback}>\n                        {\n                            this.props.authorities.includes('rules-correct')?this.renderRulesCorrection():null\n                        }\n                        {\n                            this.props.authorities.includes('wfst-correct')?this.renderWfstCorrection():null\n                        }\n                    </Tabs>\n                </ContentBox>\n            </ContentWapper>\n        )\n    }\n\n    componentDidMount(){\n        if(this.props.authorities.includes('rules-correct')){\n            this.props.rulesInit()\n        }\n        if(this.props.authorities.includes('wfst-correct')){\n            this.props.wfstInit()\n        }\n        \n    }\n    \n    reload = () => {\n        console.log(this)\n        this.componentDidMount()\n    }\n}\n\nconst mapStateToProps = (state)=>{\n    return {\n        authorities: state.getIn(['login','authorities']),\n        projects: state.getIn(['correction','projects']),\n        rulesCorrections: state.getIn(['correction','corrections']),\n        selectedProject: state.getIn(['correction','selectedProject']),\n        rulesFixResult: state.getIn(['correction','rulesFixResult']),\n        wfstProjects: state.getIn(['correction','wfstProjects']),\n        wfstCorrections: state.getIn(['correction','wfstCorrections']),\n        selectedWfstProject: state.getIn(['correction','selectedWfstProject']),\n        wfstFixResult: state.getIn(['correction','wfstFixResult'])\n    }\n}\n\nconst mapDispatch = (dispatch) =>({\n    rulesInit(){\n        dispatch(actionCreators.handleRulesInit())\n    },\n    handleChangeRulesProject(project){\n        dispatch(actionCreators.handleChangeRulesProject(project))\n    },\n    changeRulesCorrections(corrections){\n        dispatch(actionCreators.changeRulesCorrections(corrections))\n    },\n    handleRulesFix(project,text){\n        dispatch(actionCreators.handleRulesFix(project,text))\n    },\n    wfstInit(){\n        dispatch(actionCreators.handleWfstInit())\n    },\n    handleChangeWfstProject(project){\n        dispatch(actionCreators.handleChangeWfstProject(project))\n    },\n    handleWfstFix(project,text){\n        dispatch(actionCreators.handleWfstFix(project,text))\n    }\n})\n\nexport default connect(mapStateToProps,mapDispatch)(Correction);"],"sourceRoot":""}