{"version":3,"sources":["components/downloadBtn/index.js","../node_modules/@ant-design/icons-svg/es/asn/InboxOutlined.js","../node_modules/@ant-design/icons/es/icons/InboxOutlined.js","pages/autotraining/audioModel/style.js","pages/autotraining/audioModel/index.js"],"names":["FileDown","props","handleDownFile","event","api_url","fileName","preventDefault","stopPropagation","setState","loadingStatus","buttonDisabled","instance","axios","create","baseURL","responseType","timeout","headers","url","get","then","res","console","log","backEndFileName","split","replace","length","loadTxtFile","data","catch","error","state","content","aLink","document","createElement","blob","Blob","type","download","href","URL","createObjectURL","body","appendChild","evt","createEvent","initEvent","dispatchEvent","removeChild","revokeObjectURL","this","text","style","className","btnType","btnDisabled","placement","title","onClick","disabled","loading","size","icon","PureComponent","proTypes","PropTypes","isRequired","defaultProps","InboxOutlined","ref","React","AntdIcon","Object","assign","InboxOutlinedSvg","displayName","ContentWapper","styled","main","ContentBox","div","AddBtnWapper","Column","Table","Dragger","Upload","Option","Select","layout","labelCol","span","wrapperCol","tailLayout","offset","AudioModel","visible","audioModelName","audioModelDesc","file","showModal","handleFinish","values","formData","FormData","append","user_filename","env_name","desc","post","reload","handleCancel","e","componentDidMount","modelType","onCancel","footer","destroyOnClose","name","initialValues","onFinish","Item","label","rules","required","message","envs","map","item","value","key","display_name","beforeUpload","htmlType","cancel","tableData","handleDeleteTableItem","renderModal","dataSource","rowKey","record","file_id","width","align","dataIndex","render","moment","format","index","onConfirm","okText","cancelText","DeleteOutlined","handleInitTableData","handleInitEnvData","Component","connect","getIn","dispatch","trainModelActionCreators","handleChangeEnv","actionCreators"],"mappings":"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","file":"static/js/8.6a9c81e5.chunk.js","sourcesContent":["/**\n * @desc:这是一个文件下载组件\n * @param:参数说明\n *    api_url:接口地址\n *    icon: 下载图片设置\n *    text: 下载文本设置\n *    downFileBtnClass: 按钮样式设置\n * \n */\nimport React, {PureComponent} from 'react';\nimport PropTypes from 'prop-types';\nimport {Button, Tooltip} from 'antd';\nimport {\n    DownloadOutlined\n} from '@ant-design/icons';\nimport axios from 'axios'\n\nclass FileDown extends PureComponent {\n    constructor(props) {\n        super(props);\n        this.state = {\n            loadingStatus: true,\n            buttonDisabled: false\n        }\n    }\n\n    loadTxtFile(fileName, content,url){\n        console.log(content)\n        let aLink = document.createElement('a');\n        let blob = new Blob([content], {\n            type: 'application/octet-stream'\n        });\n        aLink.download = fileName;\n        aLink.href = URL.createObjectURL(blob)\n        // aLink.href = url\n        // aLink.click();\n        //此写法兼容可火狐浏览器\n        document.body.appendChild(aLink);\n        var evt = document.createEvent(\"MouseEvents\");\n        evt.initEvent(\"click\", false, false);\n        aLink.dispatchEvent(evt);\n        document.body.removeChild(aLink)\n\n        URL.revokeObjectURL(blob);\n        \n\n    }\n\n    //文件下载操作\n    handleDownFile = (event, api_url,fileName) => {\n        event.preventDefault();\n        event.stopPropagation();\n        //开启loading 按钮置灰\n        this.setState({\n            loadingStatus: false,\n            buttonDisabled: true,\n        });\n\n        let instance = axios.create({\n            baseURL:'http://10.186.0.210:8001/',\n            responseType:'blob',\n            timeout:10000,\n            headers:{\"Content-Type\":\"multipart/form-data\"}\n        })\n        let url = api_url\n\n        instance.get(url).then(res=>{\n            console.log(res)\n            let backEndFileName = \"\"\n            if(res.headers){\n                // let regex1 = /\"(.+?)\"/g;   // \"\" \n                backEndFileName = res.headers['content-disposition'].split('filename=')[1].replace(/\"/g,\"\")\n                console.log(backEndFileName)\n            }\n            if(backEndFileName.length>0){\n                fileName = backEndFileName\n            }\n            this.loadTxtFile(fileName,res.data,url)\n            this.setState({\n                loadingStatus: true,\n                buttonDisabled: false,\n            });\n        }).catch((error) => {\n            //关闭loading 按钮恢复正常\n            this.setState({\n                loadingStatus: false,\n                buttonDisabled: false,\n            });\n            console.log('文件下载失败', error);\n        })\n    };\n\n  render() {\n    const {api_url, text, style, className, btnType, fileName,btnDisabled} = this.props;\n    const {loadingStatus, buttonDisabled} = this.state;\n    // btnType 用于展现不同的下载样式 分为iconBtn wordBtn \n    if(btnType==='iconBtn'){\n        return(\n            <Tooltip placement=\"bottomLeft\" title={text}>\n                <Button \n                    type=\"primary\" \n                    style={style}\n                    className={className}\n                    onClick={(event) => this.handleDownFile(event, api_url,fileName)}\n                    disabled={buttonDisabled||btnDisabled}\n                    loading={!loadingStatus}\n                    size=\"small\" \n                    icon={<DownloadOutlined />}\n                />\n            </Tooltip>\n        )\n    }\n    return (\n      <Button\n        type=\"primary\"\n        style={style}\n        // icon={<DownloadOutlined />}\n        className={className}\n        onClick={(event) => this.handleDownFile(event, api_url, fileName)}\n        disabled={buttonDisabled||btnDisabled}\n        loading={!loadingStatus}\n      >\n        {loadingStatus ? text : '下载中...'}\n      </Button>\n    );\n  }\n}\n\n//定义属性 类型以及是否必填项\nFileDown.proTypes = {\n  api_url: PropTypes.isRequired\n};\n//定义属性的默认值\nFileDown.defaultProps = {\n  text: '文件下载',\n  icon: 'download',\n  className: {},\n  btnDisabled:false\n};\nexport default FileDown;","// This icon file is generated automatically.\nvar InboxOutlined = { \"icon\": { \"tag\": \"svg\", \"attrs\": { \"viewBox\": \"0 0 1024 1024\", \"focusable\": \"false\" }, \"children\": [{ \"tag\": \"path\", \"attrs\": { \"d\": \"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z\" } }] }, \"name\": \"inbox\", \"theme\": \"outlined\" };\nexport default InboxOutlined;\n","// GENERATE BY ./scripts/generate.ts\n// DON NOT EDIT IT MANUALLY\nimport * as React from 'react';\nimport InboxOutlinedSvg from \"@ant-design/icons-svg/es/asn/InboxOutlined\";\nimport AntdIcon from '../components/AntdIcon';\n\nvar InboxOutlined = function InboxOutlined(props, ref) {\n  return React.createElement(AntdIcon, Object.assign({}, props, {\n    ref: ref,\n    icon: InboxOutlinedSvg\n  }));\n};\n\nInboxOutlined.displayName = 'InboxOutlined';\nexport default React.forwardRef(InboxOutlined);","import styled from 'styled-components';\n\nexport const ContentWapper = styled.main`\n    margin:30px 10px 0;\n`\nexport const ContentBox = styled.div`\n    background:#fff;\n    padding: 0 20px;\n    min-height: calc(100vh - 156px);\n    & .edit-btn{\n        background: #faad14;\n        color: #fff;\n        border-color: #faad14;\n    }\n    & .edit-btn:focus,.edit-btn:hover{\n        background:#fbc457;\n        border-color: #fbc457;\n    }\n    & .start-btn{\n        background: #52c41a;\n        border-color: #52c41a;\n        color: #fff;\n    }\n    & .start-btn:focus,.start-btn:hover{\n        background: #74d445;\n        border-color: #74d445;\n    }\n    & .stop-btn{\n        background: #181918;\n        border-color: #181918;\n        color: #fff;\n    }\n    & .stop-btn:focus,.stop-btn:hover{\n        background: #656765;\n        border-color: #656765;\n    }\n\n`\n\nexport const AddBtnWapper = styled.div`\n    text-align: right;\n    padding: 20px;\n`\n\n","import React, {Component} from 'react'\nimport {connect} from 'react-redux'\nimport moment from 'moment'\nimport axios from 'axios'\nimport { Table, Modal, Space,Select, Button, Tooltip, Popconfirm, message, Form, Input, Upload } from 'antd';\nimport {actionCreators} from './store'\nimport {actionCreators as trainModelActionCreators } from '../trainModel/store'\nimport {ContentWapper,ContentBox,AddBtnWapper} from './style'\nimport {\n    InboxOutlined,\n    DeleteOutlined\n  } from '@ant-design/icons';\nimport DownloadBtn from '../../../components/downloadBtn'\n\nconst { Column } = Table;\nconst { Dragger } = Upload;\nconst { Option } = Select;\n\nconst layout = {\n    labelCol: { span: 6 },\n    wrapperCol: { span: 16 },\n};\nconst tailLayout = {\n    wrapperCol: { offset:6, span: 16 },\n};\n\nclass AudioModel extends Component{\n    \n    \n    state = { visible: false ,type:'add',data:{\n        audioModelName:'',\n        audioModelDesc:'',\n        file:''\n    }};\n\n    showModal = (type,data) => {\n        this.setState({\n            visible: true,\n            type,\n            data\n        });\n    };\n\n    handleFinish = values => {\n        console.log(values);\n\n        const formData = new FormData();\n        formData.append('file', values.file.file);\n        formData.append('user_filename', values.user_filename);\n        formData.append('msg_type','upload')\n        formData.append('env_name',values.env_name)\n        formData.append('desc',values.desc)\n        let instance = axios.create({\n            baseURL:'http://10.186.0.210:8001/',\n            timeout:1000,\n            headers:{\"Content-Type\":\"multipart/form-data\"}\n        })\n        let url='api/v1/auto-lm/acoustic-model/'\n        console.log(url)\n\n        instance.post(url,formData).then(res=>{\n            console.log(res)\n            this.reload()\n        })\n        this.setState({\n            visible: false,\n        });\n    };\n\n    handleCancel = e => {\n        console.log(e);\n        this.setState({\n        visible: false,\n        });\n    };\n\n    renderModal(){\n\n        let modelType = \"添加\"\n        if(this.state.type===\"edit\"){\n            modelType = \"编辑\"\n        }\n\n        console.log(this.state.type,this.state.data)\n\n        return(\n            <Modal\n                title={modelType + \"声学模型\"}\n                visible={this.state.visible}\n                onCancel={this.handleCancel}\n                footer={null}\n                destroyOnClose\n            >\n                <Form\n                    {...layout}\n                    name=\"basic\"\n                    initialValues={this.state.data}\n                    onFinish={this.handleFinish}\n                >\n                    <Form.Item\n                        label=\"声学模型名称\"\n                        name=\"user_filename\"\n                        rules={[{ required: true, message: '请输入声学模型名称!' }]}\n                    >\n                        <Input/>\n                    </Form.Item>\n\n                    <Form.Item\n                        label=\"所属训练环境\"\n                        name=\"env_name\"\n                        rules={[{ required: true, message: '请选择训练环境!' }]}\n                    >\n                        <Select \n                            disabled={this.state.type===\"edit\"}\n                        >\n                            {this.props.envs.map(item=>(\n                                <Option value={item.name} key={item.name}>{item.display_name}</Option>\n                            ))}\n                            \n                        </Select>\n                    </Form.Item>\n                    <Form.Item\n                        label=\"声学模型描述\"\n                        name=\"desc\"\n                    >\n                        <Input/>\n                    </Form.Item>\n\n                    <Form.Item\n                        label=\"上传声学模型\"\n                        name=\"file\"\n                        rules={[{ required: true, message: '请上传声学模型!' }]}\n                    >\n                        <Dragger \n                            name='file'\n                            beforeUpload={(file)  => {\n                                const isLt10M = file.size / 1024 / 1024 <= 50;\n                                if (!isLt10M) {\n                                    message.error(\"文件大小限制在50M以下！\");\n                                    return false;\n                                }\n                                return false;\n                            }}\n                        >\n                            <p className=\"ant-upload-drag-icon\">\n                                <InboxOutlined />\n                            </p>\n                            <p className=\"ant-upload-text\">点击或拖拽到这个区域进行上传</p>\n                            <p className=\"ant-upload-hint\">\n                                文件大小不能超过50MB\n                            </p>\n                        </Dragger>\n                    </Form.Item>\n\n                    <Form.Item {...tailLayout}>\n                        <Button type=\"primary\" htmlType=\"submit\">\n                            确定\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </Modal>\n        )\n    }\n\n    render(){\n          \n        function cancel(e) {\n            console.log(e);\n        }\n        const { tableData, handleDeleteTableItem } = this.props;\n\n        return(\n            <ContentWapper>\n                <ContentBox>\n                    <AddBtnWapper>\n                        <Button type=\"primary\" onClick={()=>this.showModal(\"add\",{env_name:this.props.envs[0].name})}>\n                        添加声学模型\n                    </Button>\n                    </AddBtnWapper>\n                    {this.renderModal()}\n                    <Table dataSource={tableData} rowKey={(text, record) => text.file_id}>\n                        <Column title=\"环境名称\" width=\"10\" align=\"center\" dataIndex=\"env_name\" key=\"envName\" />\n                        <Column title=\"声学模型名称\" width=\"10\" align=\"center\" dataIndex=\"user_filename\" key=\"audioModelName\" />\n                        <Column title=\"声学模型描述\" align=\"center\" dataIndex=\"desc\" key=\"audioModelDesc\" />\n                        <Column title=\"创建时间\"  align=\"center\"dataIndex=\"create_at\" key=\"createTime\"  render={(text)=>(\n                            <span>{moment(text).format(\"YYYY-MM-DD HH:mm:ss\")}</span>\n                        )}/>\n                        <Column\n                            title=\"操作\"\n                            key=\"action\"\n                            align=\"center\"\n                            render={(text, record, index) => (\n                                <Space size=\"small\">\n                                    <DownloadBtn\n                                        api_url={\"api/v1/auto-lm/download/?type=am&id=\"+record.file_id}\n                                        btnType=\"iconBtn\"\n                                        fileName={record.user_filename}\n                                    />\n                                    <Popconfirm title=\"确认删除？\" onConfirm={()=>handleDeleteTableItem(record,index)} onCancel={cancel} okText=\"确定\" cancelText=\"取消\">\n                                        <Tooltip placement=\"bottomLeft\" title='删除'>\n                                            <Button type=\"danger\" size=\"small\" icon={<DeleteOutlined />}></Button>\n                                        </Tooltip>\n                                    </Popconfirm>\n                                </Space>\n                            )}\n                        />\n                    </Table>\n                </ContentBox>\n            </ContentWapper>\n        )\n    }\n    componentDidMount(){\n        this.props.handleInitTableData()\n        if(this.props.envs.size===0){\n            this.props.handleInitEnvData()\n        }\n    }\n\n    reload = () => {\n        this.componentDidMount()\n    }\n}\n\nconst mapStateToProps = (state)=>{\n    return {\n        tableData: state.getIn(['audioModel','tableData']),\n        envs:state.getIn(['trainModel','envs'])\n    }\n}\n\nconst mapDispatch = (dispatch) =>({\n    handleInitEnvData(){\n        dispatch(trainModelActionCreators.handleChangeEnv())\n    },\n    handleInitTableData(){\n        dispatch(actionCreators.handleInitTableData())\n    },\n    handleDeleteTableItem(data,index){\n        dispatch(actionCreators.handleDeleteTableItem(index,data))\n        // message.success('删除成功');\n    }\n})\n\nexport default connect(mapStateToProps,mapDispatch)(AudioModel);"],"sourceRoot":""}