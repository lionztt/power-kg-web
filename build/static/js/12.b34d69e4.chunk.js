(this.webpackJsonpmyapp=this.webpackJsonpmyapp||[]).push([[12],{426:function(e,t,n){"use strict";var a=n(56),r=n(57),l=n(59),o=n(58),i=n(0),c=n.n(i),s=n(77),u=n.n(s),d=n(152),m=n(78),p=n(441),f=n(47),h=n.n(f),b=function(e){Object(l.a)(n,e);var t=Object(o.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).handleDownFile=function(e,t,n){e.preventDefault(),e.stopPropagation(),r.setState({loadingStatus:!1,buttonDisabled:!0});var a=h.a.create({baseURL:"http://10.186.0.210:8001/",responseType:"blob",timeout:1e4,headers:{"Content-Type":"multipart/form-data"}}),l=t;a.get(l).then((function(e){console.log(e);var t="";e.headers&&(t=e.headers["content-disposition"].split("filename=")[1].replace(/"/g,""),console.log(t)),t.length>0&&(n=t),r.loadTxtFile(n,e.data,l),r.setState({loadingStatus:!0,buttonDisabled:!1})})).catch((function(e){r.setState({loadingStatus:!1,buttonDisabled:!1}),console.log("\u6587\u4ef6\u4e0b\u8f7d\u5931\u8d25",e)}))},r.state={loadingStatus:!0,buttonDisabled:!1},r}return Object(r.a)(n,[{key:"loadTxtFile",value:function(e,t,n){console.log(t);var a=document.createElement("a"),r=new Blob([t],{type:"application/octet-stream"});a.download=e,a.href=URL.createObjectURL(r),document.body.appendChild(a);var l=document.createEvent("MouseEvents");l.initEvent("click",!1,!1),a.dispatchEvent(l),document.body.removeChild(a),URL.revokeObjectURL(r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.api_url,a=t.text,r=t.style,l=t.className,o=t.btnType,i=t.fileName,s=t.btnDisabled,u=this.state,f=u.loadingStatus,h=u.buttonDisabled;return"iconBtn"===o?c.a.createElement(d.a,{placement:"bottomLeft",title:a},c.a.createElement(m.a,{type:"primary",style:r,className:l,onClick:function(t){return e.handleDownFile(t,n,i)},disabled:h||s,loading:!f,size:"small",icon:c.a.createElement(p.a,null)})):c.a.createElement(m.a,{type:"primary",style:r,className:l,onClick:function(t){return e.handleDownFile(t,n,i)},disabled:h||s,loading:!f},f?a:"\u4e0b\u8f7d\u4e2d...")}}]),n}(i.PureComponent);b.proTypes={api_url:u.a.isRequired},b.defaultProps={text:"\u6587\u4ef6\u4e0b\u8f7d",icon:"download",className:{},btnDisabled:!1},t.a=b},501:function(e,t,n){"use strict";n.r(t);var a=n(56),r=n(57),l=n(154),o=n(59),i=n(58),c=n(0),s=n.n(c),u=n(60),d=n(495),m=n(219),p=n(440),f=n(422),h=n(421),b=n(78),g=n(205),v=n(15),E=n(34),y=n(35);function x(){var e=Object(E.a)(["\n    text-align: center;\n    margin: 20px;\n"]);return x=function(){return e},e}function w(){var e=Object(E.a)(["\n    display: inline-block;\n    width: 50%;\n"]);return w=function(){return e},e}function j(){var e=Object(E.a)(["\n    float: left;\n    width: 50%;\n"]);return j=function(){return e},e}function C(){var e=Object(E.a)(["\n    margin:20px 0;\n"]);return C=function(){return e},e}function R(){var e=Object(E.a)(["\n    position: absolute;\n    right: 0;\n    z-index: 100;\n"]);return R=function(){return e},e}function k(){var e=Object(E.a)(["\n    width:120px;\n    text-align:right;\n    margin-right:15px;\n    display:inline-block;\n"]);return k=function(){return e},e}function F(){var e=Object(E.a)(["\n    margin-bottom: 10px;\n    // padding: 0 40px 0 0;\n    & *{\n        display:inline-block;\n        vertical-align: text-top;\n    }\n    & .ant-input{\n        width:200px;\n    }\n    & .ant-btn{\n        margin-left:30px;\n    }\n\n    & .add-btn{\n        background: #52c41a;\n        border-color: #52c41a;\n        color: #fff;\n    }\n    & .add-btn:focus,.add-btn:hover{\n        background: #74d445;\n        border-color: #74d445;\n    }\n    & .ant-form-item-with-help{\n        margin-bottom:0;\n    }\n    & .ant-form-item-explain{\n        margin-left:10px;\n    }\n"]);return F=function(){return e},e}function O(){var e=Object(E.a)(["\n    //position:relative;\n    display:inline-block;\n    vertical-align: top;\n    width: calc(100% - 80px);\n"]);return O=function(){return e},e}function I(){var e=Object(E.a)(["\n    width:65px;\n    display:inline-block;\n    text-align:right;\n    margin-right:15px;\n"]);return I=function(){return e},e}function T(){var e=Object(E.a)(["\n    margin-bottom: 10px;\n    position:relative;\n    // display:flex;\n    // align-items: flex-start;\n    // padding: 0 40px 0 0;\n"]);return T=function(){return e},e}function P(){var e=Object(E.a)(["\n    min-width: 900px;   \n    background:#fff;\n    padding: 20px 35px;\n    min-height: calc(100vh - 156px);\n"]);return P=function(){return e},e}function U(){var e=Object(E.a)(["\n    margin:30px 10px 0;\n"]);return U=function(){return e},e}var W=y.b.main(U()),D=y.b.div(P()),N=y.b.div(T()),A=y.b.label(I()),S=y.b.div(O()),_=y.b.div(F()),q=(y.b.label(k()),y.b.div(R()),y.b.div(C())),L=y.b.div(j()),B=y.b.div(w()),M=y.b.div(x()),z=n(426),J=d.a.TabPane,K=function(e){Object(o.a)(n,e);var t=Object(i.a)(n);function n(){var e;Object(a.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).handleUpdateWfstCorrections=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"add",r=0;"delete"===a&&(r=1);var l="api/v1/post-process/wfst/"+n+"/";t&&Object(v.c)({url:l,params:{name:n,rules:[t],delete:r}}).then((function(t){console.log(t),e.reload(),m.a.success("\u6613\u6df7\u6dc6\u8bcd\u8868\u66f4\u65b0\u6210\u529f\uff01")})).catch()},e.handleUpdateRulesCorrections=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"add",r=0;"delete"===a&&(r=1);var l="api/v1/post-process/rules/"+n+"/";t&&Object(v.c)({url:l,params:{name:n,rules:[t],delete:r}}).then((function(t){console.log(t),e.reload(),m.a.success("\u89c4\u5219\u7ea0\u9519\u8bcd\u8868\u66f4\u65b0\u6210\u529f\uff01")})).catch()},e.handleUpdateRulesCorrectionsByRegrex=function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"add",r=0;"delete"===a&&(r=1);var l="api/v1/post-process/regrex/"+n+"/";t&&Object(v.c)({url:l,params:{name:n,rules:[t],delete:r}}).then((function(t){console.log(t),e.reload(),m.a.success("\u89c4\u5219\u7ea0\u9519\u8bcd\u8868\u66f4\u65b0\u6210\u529f\uff01")})).catch()},e.reload=function(){console.log(Object(l.a)(e)),e.componentDidMount()},e}return Object(r.a)(n,[{key:"callback",value:function(e){console.log(e)}},{key:"renderRulesCorrection",value:function(){var e=this,t=this.props,n=t.selectedProject,a=t.projects,r=t.rulesFixResult,l=t.handleRulesFix,o=t.handleChangeRulesProject,i=t.rulesCorrections;return s.a.createElement(J,{tab:"\u89c4\u5219\u7ea0\u9519",key:"1"},s.a.createElement(N,null,s.a.createElement(A,null,"\u73af\u5883\u540d\u79f0"),s.a.createElement(S,null,s.a.createElement(p.a,{style:{width:200},value:n,onChange:o},a.map((function(e){return s.a.createElement(p.a.Option,{key:e,value:e},e)})))),s.a.createElement(z.a,{style:{position:"absolute",right:"0"},api_url:"api/v1/post-process/download/?type=rule&name="+n,text:"\u4e0b\u8f7d\u914d\u7f6e\u6587\u4ef6",fileName:n+"_rules_config.txt"})),s.a.createElement(N,null,s.a.createElement(A,null,"\u7ea0\u9519\u8bcd\u5bf9"),s.a.createElement(S,null,s.a.createElement(f.a.TextArea,{value:i,disabled:!0,style:{width:"100%"},rows:4,placeholder:""}))),s.a.createElement(_,null,s.a.createElement(h.a,{name:"rulesForm",layout:"inline",onFinish:function(t){return e.handleUpdateRulesCorrectionsByRegrex(t,n,"add")}},s.a.createElement(h.a.Item,{name:"pre",label:"\u88ab\u4fee\u6b63\u8bcd",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u88ab\u4fee\u6b63\u8bcd!"}]},s.a.createElement(f.a,null)),s.a.createElement(h.a.Item,{name:"after",label:"\u4fee\u6b63\u8bcd",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4fee\u6b63\u8bcd!"}]},s.a.createElement(f.a,null)),s.a.createElement(h.a.Item,{shouldUpdate:!0},(function(){return s.a.createElement(b.a,{type:"primary",htmlType:"submit",className:"add-btn"},"\u6dfb\u52a0")})))),s.a.createElement(_,null,s.a.createElement(h.a,{name:"rulesForm",layout:"inline",onFinish:function(t){return e.handleUpdateRulesCorrectionsByRegrex(t,n,"delete")}},s.a.createElement(h.a.Item,{name:"pre",label:"\u88ab\u4fee\u6b63\u8bcd",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u88ab\u4fee\u6b63\u8bcd!"}]},s.a.createElement(f.a,null)),s.a.createElement(h.a.Item,{name:"after",label:"\u4fee\u6b63\u8bcd",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4fee\u6b63\u8bcd!"}]},s.a.createElement(f.a,null)),s.a.createElement(h.a.Item,{shouldUpdate:!0},(function(){return s.a.createElement(b.a,{type:"danger",htmlType:"submit"},"\u5220\u9664")})))),s.a.createElement(q,null,s.a.createElement(L,null,s.a.createElement(f.a.TextArea,{allowClear:!0,ref:function(t){e.needFixText=t},style:{width:"100%"},rows:6,placeholder:"\u5728\u6b64\u8f93\u5165\u9700\u8981\u4fee\u590d\u7684\u8bed\u53e5"})),s.a.createElement(B,null,s.a.createElement(f.a.TextArea,{disabled:!0,value:r,style:{width:"100%"},rows:6,placeholder:"\u4fee\u590d\u7ed3\u679c"})),s.a.createElement(M,null,s.a.createElement(b.a,{type:"primary",onClick:function(){return l(n,e.needFixText.state.value)}},"\u4fee\u590d\u8bed\u53e5"))))}},{key:"renderWfstCorrection",value:function(){var e=this,t=this.props,n=t.selectedWfstProject,a=t.wfstProjects,r=t.wfstCorrections,l=t.wfstFixResult,o=t.handleWfstFix,i=t.handleChangeWfstProject;return s.a.createElement(J,{tab:"\u667a\u80fd\u7ea0\u9519",key:"2"},s.a.createElement(N,null,s.a.createElement(A,null,"\u73af\u5883\u540d\u79f0"),s.a.createElement(S,null,s.a.createElement(p.a,{style:{width:200},value:n,onChange:i},a.map((function(e){return s.a.createElement(p.a.Option,{key:e,value:e},e)})))),s.a.createElement(z.a,{style:{position:"absolute",right:"0"},api_url:"api/v1/post-process/download/?type=wfst&name="+n,text:"\u4e0b\u8f7d\u914d\u7f6e\u6587\u4ef6",fileName:n+"_wfst_config.txt"})),s.a.createElement(N,null,s.a.createElement(A,null,"\u6613\u6df7\u6dc6\u8bcd"),s.a.createElement(S,null,s.a.createElement(f.a.TextArea,{value:r,disabled:!0,style:{width:"100%"},rows:4,placeholder:""}))),s.a.createElement(_,null,s.a.createElement(h.a,{name:"wfstForm",layout:"inline",onFinish:function(t){return e.handleUpdateWfstCorrections(t,n,"add")}},s.a.createElement(h.a.Item,{name:"word",label:"\u6613\u6df7\u6dc6\u8bcd",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6613\u6df7\u6dc6\u8bcd!"}]},s.a.createElement(f.a,null)),s.a.createElement(h.a.Item,{shouldUpdate:!0},(function(){return s.a.createElement(b.a,{type:"primary",htmlType:"submit",className:"add-btn"},"\u6dfb\u52a0")})))),s.a.createElement(_,null,s.a.createElement(h.a,{name:"wfstForm",layout:"inline",onFinish:function(t){return e.handleUpdateWfstCorrections(t,n,"delete")}},s.a.createElement(h.a.Item,{name:"word",label:"\u6613\u6df7\u6dc6\u8bcd",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u6613\u6df7\u6dc6\u8bcd!"}]},s.a.createElement(f.a,null)),s.a.createElement(h.a.Item,{shouldUpdate:!0},(function(){return s.a.createElement(b.a,{type:"danger",htmlType:"submit"},"\u5220\u9664")})))),s.a.createElement(q,null,s.a.createElement(L,null,s.a.createElement(f.a.TextArea,{allowClear:!0,ref:function(t){e.needFixText=t},style:{width:"100%"},rows:6,placeholder:"\u5728\u6b64\u8f93\u5165\u9700\u8981\u4fee\u590d\u7684\u8bed\u53e5"})),s.a.createElement(B,null,s.a.createElement(f.a.TextArea,{disabled:!0,value:l,style:{width:"100%"},rows:6,placeholder:"\u4fee\u590d\u7ed3\u679c"})),s.a.createElement(M,null,s.a.createElement(b.a,{type:"primary",onClick:function(){return o(n,e.needFixText.state.value)}},"\u4fee\u590d\u8bed\u53e5"))))}},{key:"render",value:function(){return s.a.createElement(W,null,s.a.createElement(D,null,s.a.createElement(d.a,{defaultActiveKey:"1",onChange:this.callback},this.props.authorities.includes("rules-correct")?this.renderRulesCorrection():null,this.props.authorities.includes("wfst-correct")?this.renderWfstCorrection():null)))}},{key:"componentDidMount",value:function(){this.props.authorities.includes("rules-correct")&&this.props.rulesInit(),this.props.authorities.includes("wfst-correct")&&this.props.wfstInit()}}]),n}(c.Component);t.default=Object(u.b)((function(e){return{authorities:e.getIn(["login","authorities"]),projects:e.getIn(["correction","projects"]),rulesCorrections:e.getIn(["correction","corrections"]),selectedProject:e.getIn(["correction","selectedProject"]),rulesFixResult:e.getIn(["correction","rulesFixResult"]),wfstProjects:e.getIn(["correction","wfstProjects"]),wfstCorrections:e.getIn(["correction","wfstCorrections"]),selectedWfstProject:e.getIn(["correction","selectedWfstProject"]),wfstFixResult:e.getIn(["correction","wfstFixResult"])}}),(function(e){return{rulesInit:function(){e(g.a.handleRulesInit())},handleChangeRulesProject:function(t){e(g.a.handleChangeRulesProject(t))},changeRulesCorrections:function(t){e(g.a.changeRulesCorrections(t))},handleRulesFix:function(t,n){e(g.a.handleRulesFix(t,n))},wfstInit:function(){e(g.a.handleWfstInit())},handleChangeWfstProject:function(t){e(g.a.handleChangeWfstProject(t))},handleWfstFix:function(t,n){e(g.a.handleWfstFix(t,n))}}}))(K)}}]);
//# sourceMappingURL=12.b34d69e4.chunk.js.map